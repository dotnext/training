<!DOCTYPE html>
<html>
  <head>
    <title>Kubernetes</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);
      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
        <link rel="stylesheet" type="text/css" href="../css/default.css">
  </head>
  <body>
    <textarea id="source">
      # Kubernetes and Related Services

      ---

      #What's a Container Orchestrator?

      Container runtimes (runC, rkt ContainerD) are good at running containers on a single host. In a production environment you would probaly like to manage multiple hosts in order to create a scalable and highly available infrastructure. This can be attained by creating a central management unit. This unit is called *Container Orchestrator*.
      
      ---
      # What is a Cloud Native Platform?
      Cloud-native platforms offer a super set of functionality over and above the earlier PaaS offerings.
      Not only they provide an abstraction of the IaaS layers offerered via self service but they add built-in features, such as:
      * resiliency
      * log aggregation
      * user management and security
      * Secrets management
      * and more!!
      
      ---
      
      #Cloud Native Platform
      
       The ultimate goal of a Cloud Native Platform is to *make the software* build, test, deploy, and scale *cycle significantly faster*
      
      ---
      
      # Why Cloud Foundry?
      

      ```
      > “Nobody has ever built cloud-native apps without a platform. They either build one themselves or they use Cloud Foundry.”
      
      -- Joshua McKenty, Field CTO of Pivotal Cloud Foundry
      ``` 
      
      ---


      # CF 101

      >what problems does it solve?

      * managing operating systems sucks.
      * managing runtimes sucks
      * managing deployment of dependencies sucks
      * managing application isolation sucks
      * managing deployment tasks sucks

      ---


      ## Process for deploying/scaling app on EC2 / EHC / etc

      1. Deploy VM (the easy part - handled by IaaS...CMDB?)
      2. Secure VM (or write some puppet)
      3. Install runtime (with what?  rpm?  tarball?)
      4. Install dependencies (or write some scripts)
      5. Install application (tarball? RPM? git?)
      6. Start application (how?  job engine?  keep it running?)
      7. Modify load balancer (how?)
      8. Modify firewall (how?)
      9. Add health checks (to where?  http? tcp? )

      ---

      ## Process for deploying app on CF

      * `cf push app_name`

      ## Process for scaling app on CF

      * `cf scale app_name -i instance_count`

      ---

      #PCF makes your life easier using different Components

      ![](http://i.imgur.com/mMY4e9E.jpg)

      ---

      # Components


      * Cloud Controller
      * UAA
      * Diego
      * Loggregator
      * GoRouter
      * Buildpacks
      * Services
      * BOSH

      ---
      
      # High Level Overview of Cloud Foundry
      
      ![inline](../images/FC-CF.png)
      
      ---
      
      # Cloud Foundry: Layers and "Contracts"
      
      ![inline](../images/CFLayers.png)
      
      ---
      # App Deployment Detailed Overview
      
      ![inline](../images/AppDeploymentOverview.png)
      
      ---

      # Cloud Controller

      * API layer
      * `cf` cli talks to this layer
      
      ---
      # Example
      
      ```
      mcowger@hex:~
      $ cf apps
      Getting apps in org EVP / space EMC as matt.cowger@emc.com...
      OK

      name                    requested state   instances   memory   disk   urls
      boisecode               stopped           0/1         128M     1G     boisecode.cfapps.io
      bourbonTweetAlerts      started           1/1         256M     1G     bourbontweetalerts.cfapps.io
      cfworker                started           1/1         128M     1G     cfworker.cfapps.io
      ```

      ---

      # UAA
      **User Account and Authentication**
      
      * Authentication layer
      * Internal or LDAP Backend
      * OAUTH2 Provider
      * Recent Dell EMC work

      ---


      # Diego

      Elastic Runtime Components

        * Container Management (through Garden)
        * Container Scheduling
        * Droplet Creation
        * Placement / Availability Management
        * Deployment of Applications

      > Recent rewrite to enable new hotness

      ---

      # Loggregator

      * Platform for delivering application log output
      * Collates as needed
      * `Firehose` too


      ##Example

      ```
      $ cf logs --recent chargers2
      2015-06-02T08:45:42.48-0700 [App/0]      OUT chargers2.cfapps.io - [02/06/2015:15:45:42 +0000] "GET / HTTP/1.1" 200 0 8461 ...
      2015-06-02T08:45:45.06-0700 [App/1]      OUT chargers2.cfapps.io - [02/06/2015:15:45:45 +0000] "GET / HTTP/1.1" 200 0 8461 ...

      ```


      ---

      # Gorouter


      * Accepts requests for a specific 'route' (URL)
      * Passes them to available applications and instances assigned to that route (possibly more than 1)
      * Can be replaced by other load balancers if needed

      ---

      # Buildpacks

      Provide basis for running application:

        * Language runtime (`Ruby`, `Python`, `COBOL`, `Java`, etc)
        * Module installation (as needed)
        * Debugger setup (as needed)
        * anything language or environment specific

      ---

      # Services

      > no application is an island

      External tools automatically provisioned and attached

        * Databases (MySQL, Oracle, Postgres)
        * NoSQL (Redis, MongoDB, etc)
        * Message Queues (0mq, RabbitMQ, etc)


      ---

      # BOSH

      * Responsible for using the IaaS (vSphere, vCD, OpenStack, AWS, etc) to build virtual machines
      * VMs are called 'cells'
        * CF on Bare Metal is coming :)
        * Currently based on Ubuntu
        * Support for VMware Photon is planned

      ---


      # BOSH (Cont)

      * Responsible for managing:
        * Long Running Processes (services, apps, parts of itself)
        * Tasks (single run requests (deploy X, create Y))
        * Upgrades of infrastructure

      ---
      # Infrastructure as Code in Cloud Foundry
      
      * Multi-IaaS, Integrated API
      * Configuration changes
      * No downtime
      * Updates/upgrades
      * Remediation
      * Scale out/scale in
      * Consistency and Reliability
      
      ---
      # BOSH Overview
      
       ![inline](../images/BoshDiagram.png)
      
      ---
      # How CF maps to 12 factor Apps Properties
      
      * Codebase: taken for granted
      * Dependencies: Buildpacks
      * Configuration services: env variables/service binding
      * Backing services: API endpoint
      * Build, Release, Run: Diego Architecture
      * Processes: cf push
      
      ---
      
      # How CF maps to 12 factor Apps Properties (cont.)
      
      * Port binding: HTTP and TCP routes
      * Concurrency: cf scale
      * Disposability: cf push/zero downtime deployment
      * Dev/Prod parity: BOSH
      * Logs: Loggregator
      * Admin processes: BOSH errands/one-off CF Apps
      
      ---

      # Demo


      ---


      # Pushing an Application to Kubernetes



      ---



      # Now you!

      ```
      git clone 
      cd hello-python
      TBD

      ```


    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
    remark.macros.scale = function (percentage) {
      var url = this;
      return '<img src="' + url + '" style="width: ' + percentage + '" />';
    };
      var slideshow = remark.create();
    </script>
  </body>
</html>

